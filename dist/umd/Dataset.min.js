!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Dataset=e()}(this,(function(){"use strict";var t={show:"Show",entries:"entries",previous:"Previous",next:"Next",showing:"Showing",showingTo:"to",showingOf:"of",showingEntries:"entries"};function e(t){for(var e in t)return!1;return!0}function n(t,e,n,s,r,i,o,d,u,a){"boolean"!=typeof o&&(u=d,d=o,o=!1);const f="function"==typeof n?n.options:n;let c;if(t&&t.render&&(f.render=t.render,f.staticRenderFns=t.staticRenderFns,f._compiled=!0,r&&(f.functional=!0)),s&&(f._scopeId=s),i?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,u(t)),t&&t._registeredComponents&&t._registeredComponents.add(i)},f._ssrRegister=c):e&&(c=o?function(t){e.call(this,a(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,d(t))}),c)if(f.functional){const t=f.render;f.render=function(e,n){return c.call(n),t(e,n)}}else{const t=f.beforeCreate;f.beforeCreate=t?[].concat(t,c):[c]}return n}var s={provide:function(){var t=this;return{search:this.search,showEntries:this.showEntries,setActive:this.setActive,datasetI18n:this.datasetI18n,rdsIndexes:function(){return t.indexes},rdsData:function(){return t.dsData},rdsRows:function(){return t.dsRows},rdsPages:function(){return t.dsPages},rdsResultsNumber:function(){return t.dsResultsNumber},rdsPagecount:function(){return t.dsPagecount},rdsFrom:function(){return t.dsFrom},rdsTo:function(){return t.dsTo},rdsPage:function(){return t.dsPage}}},props:{dsData:{type:Array,default:function(){return[]}},dsFilterFields:{type:Object,default:function(){return{}}},dsSortby:{type:Array,default:function(){return[]}},dsSearchIn:{type:Array,default:function(){return[]}},dsSearchAs:{type:Object,default:function(){return{}}},dsSortAs:{type:Object,default:function(){return{}}}},data:function(){return{dsPage:1,dsSearch:"",dsShowEntries:10,datasetI18n:t,indexes:[]}},computed:{whenChanged:function(){return this.dsData,this.dsSearch,this.dsSortby,this.dsFilterFields,this.dsSearchIn,this.dsSearchAs,this.dsSortAs,Date.now()},dsRows:function(){return this.indexes.slice(this.dsFrom,this.dsTo)},dsPages:function(){return function(t,e){var n,s=[],r=[];if(s.push(1),t<=1)return s;for(var i=e-2;i<=e+2;i++)i<t&&i>1&&s.push(i);s.push(t);for(var o=0;o<s.length;o++)n&&(s[o]-n==2?r.push(n+1):s[o]-n!=1&&r.push("...")),r.push(s[o]),n=s[o];return r}(this.dsPagecount,this.dsPage)},dsResultsNumber:function(){return this.indexes.length},dsPagecount:function(){return Math.ceil(this.dsResultsNumber/this.dsShowEntries)},dsFrom:function(){return(this.dsPage-1)*this.dsShowEntries},dsTo:function(){return this.dsPage*this.dsShowEntries}},watch:{dsResultsNumber:{handler:function(t,e){this.setActive(1)}},whenChanged:{handler:function(t,n){var s=[],r=this.dsData,i=this.dsSearch,o=this.dsSortby,d=this.dsFilterFields,u=this.dsSearchIn,a=this.dsSearchAs,f=this.dsSortAs;i||o.length||!e(d)?(s=r.map((function(t,e){return{index:e,value:t}})),e(d)||(s=function(t,e){var n=function(n){t=t.filter((function(t){var s=t.value;for(var r in s)if(r===n){if("function"==typeof e[n])return e[n](s[r]);if(""===e[n])return!0;if(s[r]===e[n])return!0}return!1}))};for(var s in e)n(s);return t}(s,d)),i&&(s=s.filter((function(t){return function(t,e,n,s){for(var r in s=String(s).toLowerCase(),n)if(0===t.length||-1!==t.indexOf(r)){var i=String(n[r]).toLowerCase();for(var o in e)if(o===r&&"function"==typeof e[o]){var d=e[o](i,s,n);if(!0===d)return d}if(i.indexOf(s)>=0)return!0}return!1}(u,a,t.value,i)}))),o.length&&s.sort(function(t,e){void 0===e&&(e={});var n,s=[],r=t.length;return t=t.map((function(t,e){return"-"===t[0]?(s[e]=-1,t=t.substring(1)):s[e]=1,t})),function(i,o){for(n=0;n<r;n++){var d=t[n],u=e[d]?e[d](i.value[d]):i.value[d],a=e[d]?e[d](o.value[d]):o.value[d];if(u>a)return s[n];if(u<a)return-s[n]}return 0}}(o,f)),s=s.map((function(t){return t.index}))):s=r.map((function(t,e){return e})),this.indexes=s},immediate:!0}},methods:{search:function(t){this.dsSearch=t},showEntries:function(t){var e=this;this.dsShowEntries=t,this.$nextTick((function(){e.dsPage>e.dsPagecount&&e.setActive(e.dsPages[e.dsPages.length-1])}))},setActive:function(t){this.dsPage=t}}},r=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",[t._t("default",null,{ds:{dsIndexes:t.indexes,dsShowEntries:t.dsShowEntries,dsResultsNumber:t.dsResultsNumber,dsPage:t.dsPage,dsPagecount:t.dsPagecount,dsFrom:t.dsFrom,dsTo:t.dsTo,dsData:t.dsData,dsRows:t.dsRows,dsPages:t.dsPages,search:t.search,showEntries:t.showEntries,setActive:t.setActive}})],2)};r._withStripped=!0;return n({render:r,staticRenderFns:[]},undefined,s,undefined,false,undefined,!1,void 0,void 0,void 0)}));
//# sourceMappingURL=Dataset.min.js.map
