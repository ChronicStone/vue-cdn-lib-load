!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).VueDataset={})}(this,(function(e){"use strict";var t={show:"Show",entries:"entries",previous:"Previous",next:"Next",showing:"Showing",showingTo:"to",showingOf:"of",showingEntries:"entries"};function s(e){for(var t in e)return!1;return!0}function n(e,t,s,n,r,i,d,a,o,u){"boolean"!=typeof d&&(o=a,a=d,d=!1);const c="function"==typeof s?s.options:s;let f;if(e&&e.render&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0,r&&(c.functional=!0)),n&&(c._scopeId=n),i?(f=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,o(e)),e&&e._registeredComponents&&e._registeredComponents.add(i)},c._ssrRegister=f):t&&(f=d?function(e){t.call(this,u(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,a(e))}),f)if(c.functional){const e=c.render;c.render=function(t,s){return f.call(s),e(t,s)}}else{const e=c.beforeCreate;c.beforeCreate=e?[].concat(e,f):[f]}return s}var r={provide:function(){var e=this;return{search:this.search,showEntries:this.showEntries,setActive:this.setActive,datasetI18n:this.datasetI18n,rdsIndexes:function(){return e.indexes},rdsData:function(){return e.dsData},rdsRows:function(){return e.dsRows},rdsPages:function(){return e.dsPages},rdsResultsNumber:function(){return e.dsResultsNumber},rdsPagecount:function(){return e.dsPagecount},rdsFrom:function(){return e.dsFrom},rdsTo:function(){return e.dsTo},rdsPage:function(){return e.dsPage}}},props:{dsData:{type:Array,default:function(){return[]}},dsFilterFields:{type:Object,default:function(){return{}}},dsSortby:{type:Array,default:function(){return[]}},dsSearchIn:{type:Array,default:function(){return[]}},dsSearchAs:{type:Object,default:function(){return{}}},dsSortAs:{type:Object,default:function(){return{}}}},data:function(){return{dsPage:1,dsSearch:"",dsShowEntries:10,datasetI18n:t,indexes:[]}},computed:{whenChanged:function(){return this.dsData,this.dsSearch,this.dsSortby,this.dsFilterFields,this.dsSearchIn,this.dsSearchAs,this.dsSortAs,Date.now()},dsRows:function(){return this.indexes.slice(this.dsFrom,this.dsTo)},dsPages:function(){return function(e,t){var s,n=[],r=[];if(n.push(1),e<=1)return n;for(var i=t-2;i<=t+2;i++)i<e&&i>1&&n.push(i);n.push(e);for(var d=0;d<n.length;d++)s&&(n[d]-s==2?r.push(s+1):n[d]-s!=1&&r.push("...")),r.push(n[d]),s=n[d];return r}(this.dsPagecount,this.dsPage)},dsResultsNumber:function(){return this.indexes.length},dsPagecount:function(){return Math.ceil(this.dsResultsNumber/this.dsShowEntries)},dsFrom:function(){return(this.dsPage-1)*this.dsShowEntries},dsTo:function(){return this.dsPage*this.dsShowEntries}},watch:{dsResultsNumber:{handler:function(e,t){this.setActive(1)}},whenChanged:{handler:function(e,t){var n=[],r=this.dsData,i=this.dsSearch,d=this.dsSortby,a=this.dsFilterFields,o=this.dsSearchIn,u=this.dsSearchAs,c=this.dsSortAs;i||d.length||!s(a)?(n=r.map((function(e,t){return{index:t,value:e}})),s(a)||(n=function(e,t){var s=function(s){e=e.filter((function(e){var n=e.value;for(var r in n)if(r===s){if("function"==typeof t[s])return t[s](n[r]);if(""===t[s])return!0;if(n[r]===t[s])return!0}return!1}))};for(var n in t)s(n);return e}(n,a)),i&&(n=n.filter((function(e){return function(e,t,s,n){for(var r in n=String(n).toLowerCase(),s)if(0===e.length||-1!==e.indexOf(r)){var i=String(s[r]).toLowerCase();for(var d in t)if(d===r&&"function"==typeof t[d]){var a=t[d](i,n,s);if(!0===a)return a}if(i.indexOf(n)>=0)return!0}return!1}(o,u,e.value,i)}))),d.length&&n.sort(function(e,t){void 0===t&&(t={});var s,n=[],r=e.length;return e=e.map((function(e,t){return"-"===e[0]?(n[t]=-1,e=e.substring(1)):n[t]=1,e})),function(i,d){for(s=0;s<r;s++){var a=e[s],o=t[a]?t[a](i.value[a]):i.value[a],u=t[a]?t[a](d.value[a]):d.value[a];if(o>u)return n[s];if(o<u)return-n[s]}return 0}}(d,c)),n=n.map((function(e){return e.index}))):n=r.map((function(e,t){return t})),this.indexes=n},immediate:!0}},methods:{search:function(e){this.dsSearch=e},showEntries:function(e){var t=this;this.dsShowEntries=e,this.$nextTick((function(){t.dsPage>t.dsPagecount&&t.setActive(t.dsPages[t.dsPages.length-1])}))},setActive:function(e){this.dsPage=e}}},i=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",[e._t("default",null,{ds:{dsIndexes:e.indexes,dsShowEntries:e.dsShowEntries,dsResultsNumber:e.dsResultsNumber,dsPage:e.dsPage,dsPagecount:e.dsPagecount,dsFrom:e.dsFrom,dsTo:e.dsTo,dsData:e.dsData,dsRows:e.dsRows,dsPages:e.dsPages,search:e.search,showEntries:e.showEntries,setActive:e.setActive}})],2)};i._withStripped=!0;var d=n({render:i,staticRenderFns:[]},undefined,r,undefined,false,undefined,!1,void 0,void 0,void 0),a={inject:["datasetI18n","rdsResultsNumber","rdsFrom","rdsTo"],computed:{showing:function(){return 0!==this.dsResultsNumber?this.dsFrom+1:0},showingTo:function(){return this.dsTo>=this.dsResultsNumber?this.dsResultsNumber:this.dsTo},dsResultsNumber:function(){return this.rdsResultsNumber()},dsFrom:function(){return this.rdsFrom()},dsTo:function(){return this.rdsTo()}}},o=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",[e._v("\n  "+e._s(e.datasetI18n.showing)+" "+e._s(e.showing)+" "+e._s(e.datasetI18n.showingTo)+" "+e._s(e.showingTo)+" "+e._s(e.datasetI18n.showingOf)+"\n  "+e._s(e.dsResultsNumber)+" "+e._s(e.datasetI18n.showingEntries)+"\n")])};o._withStripped=!0;var u=n({render:o,staticRenderFns:[]},undefined,a,undefined,false,undefined,!1,void 0,void 0,void 0),c={inject:["rdsData","rdsRows","rdsFrom","rdsTo"],props:{tag:{type:String,default:"div"}},computed:{dsRows:function(){return this.rdsRows()},dsData:function(){return this.rdsData()},dsFrom:function(){return this.rdsFrom()},dsTo:function(){return this.rdsTo()},indexes:function(){for(var e=[],t=this.dsFrom;t<this.dsTo;t++)e.push(t);return e}}},f=function(){var e=this,t=e.$createElement;return(e._self._c||t)(e.tag,{tag:"component"},[e._l(e.dsRows,(function(t,s){return[e._t("default",null,{row:e.dsData[t],rowIndex:t,index:e.indexes[s]})]})),e._v(" "),e.dsRows.length?e._e():e._t("noDataFound")],2)};f._withStripped=!0;var h=n({render:f,staticRenderFns:[]},undefined,c,undefined,false,undefined,!1,void 0,void 0,void 0),l={inject:["datasetI18n","setActive","rdsPages","rdsPagecount","rdsPage"],data:function(){return{morePages:"..."}},computed:{dsPages:function(){return this.rdsPages()},dsPagecount:function(){return this.rdsPagecount()},dsPage:function(){return this.rdsPage()},disabledPrevious:function(){return 1===this.dsPage},disabledNext:function(){return this.dsPage===this.dsPagecount||0===this.dsPagecount}}},v=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",{staticClass:"pagination"},[s("li",{class:["page-item",e.disabledPrevious&&"disabled"]},[s("a",{staticClass:"page-link",attrs:{href:"#",tabindex:e.disabledPrevious&&"-1","aria-disabled":e.disabledPrevious&&"true"},on:{click:function(t){return t.preventDefault(),e.setActive(1!==e.dsPage&&0!==e.dsPagecount?e.dsPage-1:e.dsPage)}}},[e._v("\n      "+e._s(e.datasetI18n.previous)+"\n    ")])]),e._v(" "),e._l(e.dsPages,(function(t,n){return[s("li",{key:n,class:["page-item",t===e.dsPage&&"active",t===e.morePages&&"disabled"]},[t!==e.morePages?s("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),e.setActive(t)}}},[e._v("\n        "+e._s(t)+"\n      ")]):s("span",{staticClass:"page-link"},[e._v("\n        "+e._s(t)+"\n      ")])])]})),e._v(" "),s("li",{class:["page-item",e.disabledNext&&"disabled"]},[s("a",{staticClass:"page-link",attrs:{href:"#",tabindex:e.disabledNext&&"-1","aria-disabled":e.disabledNext&&"true"},on:{click:function(t){return t.preventDefault(),e.setActive(e.dsPage!==e.dsPagecount&&0!==e.dsPagecount?e.dsPage+1:e.dsPage)}}},[e._v("\n      "+e._s(e.datasetI18n.next)+"\n    ")])])],2)};v._withStripped=!0;var g=n({render:v,staticRenderFns:[]},undefined,l,undefined,false,undefined,!1,void 0,void 0,void 0),p={inject:["search"],props:{dsSearchPlaceholder:{type:String,default:""},wait:{type:Number,default:0}},data:function(){return{dsSearch:""}},mounted:function(){var e,t,s,n,r=this;this.input=(e=function(e){r.search(e)},t=this.wait,function(){var r=this,i=arguments;clearTimeout(n),s&&!n&&e.apply(r,i),n=setTimeout((function(){n=null,s||e.apply(r,i)}),t)})}},m=p,_=function(){var e=this,t=e.$createElement;return(e._self._c||t)("input",{staticClass:"form-control",attrs:{type:"text",placeholder:e.dsSearchPlaceholder},domProps:{value:e.dsSearch},on:{input:function(t){return e.input(t.target.value)}}})};_._withStripped=!0;var w=n({render:_,staticRenderFns:[]},undefined,m,undefined,false,undefined,!1,void 0,void 0,void 0),P={inject:["datasetI18n","showEntries"],props:{dsShowEntries:{type:Number,default:10},dsShowEntriesLovs:{type:Array,default:function(){return[{value:5,text:5},{value:10,text:10},{value:25,text:25},{value:50,text:50},{value:100,text:100}]}}},created:function(){this.showEntries(Number(this.dsShowEntries))},methods:{change:function(e){this.$emit("changed",Number(e.target.value)),this.showEntries(Number(e.target.value))}}},S=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"form-inline"},[s("label",[e._v(e._s(e.datasetI18n.show))]),e._v(" "),s("select",{staticClass:"form-control mr-1 ml-1",domProps:{value:e.dsShowEntries},on:{change:e.change}},e._l(e.dsShowEntriesLovs,(function(t){return s("option",{key:t.value,domProps:{value:t.value}},[e._v("\n      "+e._s(t.text)+"\n    ")])})),0),e._v(" "),s("label",[e._v(e._s(e.datasetI18n.entries))])])};S._withStripped=!0;var b=n({render:S,staticRenderFns:[]},undefined,P,undefined,false,undefined,!1,void 0,void 0,void 0);e.Dataset=d,e.DatasetInfo=u,e.DatasetItem=h,e.DatasetPager=g,e.DatasetSearch=w,e.DatasetShow=b}));
//# sourceMappingURL=VueDataset.min.js.map
